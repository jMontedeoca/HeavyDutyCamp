"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createTransaction = void 0;
const tslib_1 = require("tslib");
const web3_js_1 = require("@solana/web3.js");
function createTransaction(params) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        let latestBlockhash;
        if ('latestBlockhash' in params) {
            latestBlockhash = params.latestBlockhash;
        }
        else {
            latestBlockhash = yield params.connection.getLatestBlockhash('finalized');
        }
        const transactionMessage = new web3_js_1.TransactionMessage({
            payerKey: new web3_js_1.PublicKey(params.payerAddress),
            recentBlockhash: latestBlockhash.blockhash,
            instructions: params.instructions,
        }).compileToV0Message();
        const transaction = new web3_js_1.VersionedTransaction(transactionMessage);
        if (params.signers) {
            transaction.sign(params.signers);
        }
        return {
            latestBlockhash,
            transaction,
        };
    });
}
exports.createTransaction = createTransaction;
//# sourceMappingURL=create-transaction.js.map